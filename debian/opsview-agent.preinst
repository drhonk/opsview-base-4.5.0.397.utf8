#! /bin/sh
# preinst script for opsview-agent
#
# see: dh_installdeb(1)

set -e

case "$1" in
    install|upgrade)
	if id nagios >/dev/null 2>&1 ; then
		# We have a nagios user.
		if [ `id nagios -g -n` != "nagios" ] ; then
			addgroup --system nagios || true
			usermod -g nagios nagios
		fi
        usermod -s `which bash` nagios || true
	else
		adduser --system --group --no-create-home --home /var/log/nagios --quiet nagios
	fi

    ;;

    abort-upgrade)
    ;;

    *)
        echo "preinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0


